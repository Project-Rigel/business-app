<ion-header>
    <ion-toolbar>
        <ion-title>AÃ±adir una cita</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="cancel()">
                <ion-label color="primary"> Cancelar</ion-label>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content fullscreen [scrollY]="false" class="ion-padding">
    <ion-slides mode="ios" pager="ios" [options]="sliderOptions" class="slider-content">
        <ion-slide>
            <div class="slide">
                <div>
                    <ion-text class="ion-margin-top ion-text-center"><h1>Seleccione un cliente</h1></ion-text>
                    <ion-searchbar
                            class = "ion-text-left"
                            debounce="500"
                            placeholder="Nombre Apellido Apellido"
                            (ionChange)="search($event)"
                    ></ion-searchbar>
                </div>         
                <app-customers-list #customerList class="customers-list ion-padding"
                                [maxHeightPercent]="60"
                                [loadedData]="(paginationService.data | async)"
                                [isSearching]="searching"
                                [done]="(paginationService.done | async)"
                                [loading]="(paginationService.loading | async)"
                                [searchResult]="(search$ | async)"
                                [isSelectable]="true"
                                (onCustomerClicked)="selectedCustomer = $event"></app-customers-list>                                             
                <ion-button [disabled]="!selectedCustomer" expand="block" color="primary" (click)="nextSlide()"> Siguiente</ion-button>
            </div>
        </ion-slide>

        <ion-slide class="slide">
            <ion-text class="ion-margin-top ion-text-center"><h1>Seleccione un producto</h1></ion-text>
            <ion-list [style.height.%]="74">
                <ion-radio-group allow-empty-selection>
                    <ion-item (click)="selectProduct(product)" *ngFor="let product of (productsService.getBusinessProducts('1') | async)">
                        <ion-label>
                            <ion-label>{{product.name}}</ion-label>
                            <ion-label>{{product.description}}</ion-label>
                        </ion-label>
                        <ion-radio slot="end" color="primary" value="{{product.id}}"></ion-radio>
                    </ion-item>
                </ion-radio-group>
            </ion-list>

            <ion-button [disabled]="!selectedProduct || loading" expand="block" color="primary" (click)="closeModal()">
                <ion-spinner name="crescent" *ngIf="loading"></ion-spinner>
                <ion-label *ngIf="!loading"> Siguiente</ion-label>
            </ion-button>
        </ion-slide>

    </ion-slides>
</ion-content>
