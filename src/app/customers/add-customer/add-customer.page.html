<ng-container *ngIf="auth.user$ | async as user">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button>
          <ion-label color="primary" (click)="cancel()">Cancelar</ion-label>
        </ion-button>
      </ion-buttons>
      <ion-title>Añadir cliente</ion-title>

      <ion-buttons slot="end">
        <ion-button
          [disabled]="!submitEnabled"
          type="submit"
          (click)="submitForm(customerForm.value, user.id)"
        >
          <ion-label color="primary">OK</ion-label>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <div class="bg-list">
      <form [formGroup]="customerForm">
        <ion-list inset lines="inset" class="ion-item-round ion-no-margin">
          <ion-item lines="none">
            <ion-label position="stacked">
              Nombre
              <ion-text color="danger">*</ion-text>
            </ion-label>
            <ion-input
              #inputNombre
              enterkeyhint="enter"
              (keyup.enter)="goToNext(primerApellido)"
              required
              type="text"
              formControlName="name"
            ></ion-input>
          </ion-item>
          <ion-text color="danger">
            <p
              *ngIf="name.invalid && name.touched"
              class="error-msg-text ion-text-center
"
            >
              El nombre debe contener al menos 3 caracteres.
            </p>
          </ion-text>

          <ion-item>
            <ion-label position="stacked">
              Primer Apellido
              <ion-text color="danger">*</ion-text>
            </ion-label>
            <ion-input
              #primerApellido
              enterkeyhint="enter"
              required
              type="text"
              formControlName="firstSurname"
              (keyup.enter)="goToNext(segundoApellido)"
            ></ion-input>
          </ion-item>

          <ion-text color="danger">
            <p
              *ngIf="firstSurname.invalid && firstSurname.touched"
              class=" error-msg-text ion-text-center"
            >
              El apellido debe contener al menos 3 caracteres.
            </p>
          </ion-text>

          <ion-item>
            <ion-label position="stacked">
              Segundo Apellido
              <ion-text color="danger">*</ion-text>
            </ion-label>
            <ion-input
              #segundoApellido
              enterkeyhint="enter"
              required
              type="text"
              formControlName="secondSurname"
              (keyup.enter)="goToNext(emailField)"
            ></ion-input>
          </ion-item>
        </ion-list>

        <ion-text color="danger">
          <p
            *ngIf="secondSurname.invalid && secondSurname.touched"
            class="error-msg-text ion-text-center"
          >
            El apellido debe contener al menos 3 caracteres.
          </p>
        </ion-text>

        <ion-list inset lines="inset" class="ion-item-round ion-no-margin">
          <ion-item>
            <ion-label position="stacked">
              Email
            </ion-label>
            <ion-input
              #emailField
              enterkeyhint="enter"
              type="email"
              formControlName="email"
              (keyup.enter)="goToNext(phoneInput)"
            ></ion-input> </ion-item
        ></ion-list>

        <ion-text color="danger">
          <p
            *ngIf="email.invalid && email.touched"
            class="error-msg-text ion-text-center"
          >
            Introduce un email válido.
          </p>
        </ion-text>

        <ion-list inset lines="inset" class="ion-item-round ion-no-margin">
          <ion-item>
            <ion-label position="stacked">
              Teléfono
              <ion-text color="danger">*</ion-text>
            </ion-label>
            <ion-input
              #phoneInput
              enterkeyhint="enter"
              required
              type="text"
              formControlName="phone"
            ></ion-input>
          </ion-item>
        </ion-list>

        <ion-text color="danger">
          <p
            *ngIf="phone.invalid && phone.touched"
            class="error-msg-text  ion-text-center"
          >
            El teléfono debe contener 9 dígitos.
          </p>
        </ion-text>
      </form>
    </div>
  </ion-content>
</ng-container>
